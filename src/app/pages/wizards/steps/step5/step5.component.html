<!-- Corporate Account Verification Section -->
<div class="pb-10 pb-lg-15">
  <h2 class="fw-bolder text-gray-900">
    {{ 'INSIGHTER_WIZARD.CORPORATE_ACCOUNT_VERIFICATION' | translate }}
  </h2>
  <div class="text-gray-500 fw-bold fs-6">
    {{ 'INSIGHTER_WIZARD.IF_NEED_MORE_INFO_VERIFICATION' | translate }}
    <a href="#" class="link-primary fw-bolder">
      {{ 'INSIGHTER_WIZARD.HELP_PAGE' | translate }}
    </a>.
  </div>
</div>

<div [formGroup]="form">
 
  <ng-container *ngIf="defaultValues.accountType === 'corporate'">

    <div class="mb-10">
      <label class="form-label required">
        {{ 'INSIGHTER_WIZARD.CHOOSE_VERIFICATION_METHOD' | translate }}
      </label>
      <div class="nav-group nav-group-fluid">    
        <label for="verificationMethod1">      
          <input 
            type="radio" 
            class="btn-check" 
            formControlName="verificationMethod" 
            name="verificationMethod" 
            value="websiteEmail" 
            id="verificationMethod1"  
            data-gtm-form-interact-field-id="1">
          <span class="btn btn-sm btn-color-muted btn-active btn-active-primary fw-bold px-4">
            {{ 'INSIGHTER_WIZARD.BY_WEBSITE_COMPANY_EMAIL' | translate }}
          </span>
        </label>
      
        <label for="verificationMethod2">  
          <input 
            type="radio" 
            class="btn-check" 
            formControlName="verificationMethod" 
            name="verificationMethod" 
            value="uploadDocument" 
            id="verificationMethod2" 
            data-gtm-form-interact-field-id="0">
          <span class="btn btn-sm btn-color-muted btn-active btn-active-primary fw-bold px-4">
            {{ 'INSIGHTER_WIZARD.BY_UPLOADING_REGISTRY_DOCUMENT' | translate }}
          </span>
        </label>
      </div>
      
    </div>

    <div *ngIf="form.get('verificationMethod')?.value === 'websiteEmail'">
      <div class="mb-10">
        <label class="form-label required">
          {{ 'INSIGHTER_WIZARD.WEBSITE_DOMAIN' | translate }}
        </label>
        <input
          formControlName="website"
          type="text"
          class="form-control"
          placeholder="{{ 'INSIGHTER_WIZARD.WEBSITE_DOMAIN' | translate }}"
        />
      </div>
      <div class="mb-10">
        <label class="form-label required">
          {{ 'INSIGHTER_WIZARD.COMPANY_EMAIL' | translate }}
        </label>
        <div class="d-flex gap-2">
          <input
            formControlName="companyEmail"
            type="email"
            class="form-control flex-3"
            placeholder="{{ 'INSIGHTER_WIZARD.COMPANY_EMAIL' | translate }}"
          />
          <button
            type="button"
            class="btn flex-1 btn-primary"
            (click)="getCode()"
            [disabled]="!form.get('companyEmail')?.valid || gettingCodeLoader || isGetCodeDisabled"
          >
            <ng-container *ngIf="!gettingCodeLoader && !isGetCodeDisabled">
              <span class="indicator-label">{{ 'INSIGHTER_WIZARD.GET_CODE' | translate }}</span>
            </ng-container>
            <ng-container *ngIf="gettingCodeLoader">
              <span class="indicator-progress" [style.display]="'block'">
                {{ "AUTH.REGISTRATION.PLEASE_WAIT" | translate }}
                <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
              </span>
            </ng-container>
            <ng-container *ngIf="isGetCodeDisabled && !gettingCodeLoader">
              <span class="indicator-progress" [style.display]="'block'">
                {{ "AUTH.REGISTRATION.PLEASE_WAIT" | translate }}
                ({{ getCodeCountdown$ | async }}s)
              </span>
            </ng-container>
          </button>
        </div>
      </div>
      <div class="mb-10">
        <label class="form-label required">
          {{ 'INSIGHTER_WIZARD.CODE' | translate }}
        </label>
        <input
          formControlName="code"
          type="text"
          class="form-control"
          placeholder="{{ 'INSIGHTER_WIZARD.ENTER_CODE' | translate }}"
        />
      </div>
    </div>
    <div *ngIf="form.get('verificationMethod')?.value === 'uploadDocument'">
       <!-- Dropzone for Registry Document -->
    <div class="fv-row mb-10">
      <!-- Show dropzone only if no file has been uploaded -->
      <div
        class="dropzone dz-clickable"
        *ngIf="!form.get('registerDocument')?.value"
        (click)="onDropzoneClick()"
        (drop)="onFileDrop($event)"
        (dragover)="onDragOver($event)"
      >
        <div class="dz-message needsclick">
          <i class="ki-outline ki-file-up fs-3hx text-primary"></i>
          <div class="mx-4 text-inline-start">
            <h3 class="dfs-3 fw-bold text-gray-900 mb-1">
              {{ 'INSIGHTER_WIZARD.DROP_OR_UPLOAD_REGISTRY_DOCUMENT' | translate }}
            </h3>
            <span class="fw-semibold fs-7 text-muted">
              {{ 'INSIGHTER_WIZARD.VERIFY_COMPANY_ACCOUNT_BY_UPLOADING_REGISTRY_DOC' | translate }}
            </span>
          </div>
        </div>
      </div>
      
      <!-- Display uploaded file if a file has been uploaded -->
      <div *ngIf="form.get('registerDocument')?.value">
        <!-- Uploaded File Details -->
        <div
          class="d-flex flex-stack py-4 border border-top-0 border-left-0 border-right-0 border-dashed"
        >
          <div class="d-flex align-items-center">
            <!-- File Icon -->
            <div class="symbol symbol-35px">
              <img
                [src]="getFileIcon(form.get('registerDocument')?.value)"
                alt="icon"
              />
            </div>
            <!-- File Details -->
            <div class="ms-6">
              <a
                href="#"
                class="fs-5 fw-bold text-gray-900 text-hover-primary mb-2"
              >
                {{ form.get("registerDocument")?.value.name }}
              </a>
              <div class="fw-semibold text-muted">
                {{
                  (form.get("registerDocument")?.value.size / 1000) | number : "1.0-2"
                }}
                KB
              </div>
            </div>
          </div>
          <!-- Delete Button -->
          <div class="min-w-100px">
            <button
              type="button"
              pTooltip="{{ 'BUTTONS.DELETE_FILE' | translate }}"
              tooltipPosition="top"
              class="btn btn-icon btn-bg-light btn-active-color-danger btn-sm text-danger"
              (click)="removeRegisterDocument()"
            >
              <i class="ki-duotone ki-trash fs-2">
                <span class="path1"></span>
                <span class="path2"></span>
                <span class="path3"></span>
                <span class="path4"></span>
                <span class="path5"></span>
              </i>
            </button>
          </div>
        </div>
      </div>
      
      <!-- Hidden File Input -->
      <input
        type="file"
        #fileInput
        (change)="onFileSelected($event)"
        accept=".png, .jpg, .jpeg, .pdf"
        style="display: none"
      />
    </div>
    </div>

  
  </ng-container>
</div>


