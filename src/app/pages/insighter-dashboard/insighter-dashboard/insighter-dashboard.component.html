<p-toast></p-toast>

<!-- Mobile Sidebar -->
<p-sidebar [(visible)]="isMobileSidebarVisible" position="left" [modal]="true" [showCloseIcon]="true" 
           [style]="{width: '280px'}" (onHide)="closeMobileSidebar()" 
           [class]="'mobile-sidebar'">
  <div class="mobile-nav-content">
    <div class="navigation-cards">
      <!-- Dashboard Card -->
      <div class="p-card navigation-card">
        <div class="p-card-header">
          <h3>{{ 'INSIGHTER.DASHBOARD.NAV.DASHBOARD' | translate }}</h3>
        </div>
        <div class="p-card-body">
          <div class="nav-item" [routerLink]="['my-dashboard']" *ngIf="!(isClient$ | async)" routerLinkActive="active" 
               (click)="closeMobileSidebar()">
            <div class="item-icon">
              <i class="ki-duotone ki-abstract-28"><span class="path1"></span><span class="path2"></span></i>
            </div>
            <div class="item-label">
              {{ 'INSIGHTER.DASHBOARD.NAV.OVERVIEW' | translate }}
            </div>
          </div>
          <div class="nav-item" [routerLink]="['my-requests']" routerLinkActive="active" *ngIf="!(isClient$ | async)"
               (click)="closeMobileSidebar()">
            <div class="item-icon">
              <i class="ki-duotone ki-document"><span class="path1"></span><span class="path2"></span></i>
            </div>
            <div class="item-label">
              {{ 'INSIGHTER.DASHBOARD.NAV.MY_REQUESTS' | translate }}
            </div>
          </div>
          <div class="nav-item" [routerLink]="['my-knowledge']" routerLinkActive="active"  *ngIf="!(isClient$ | async)"
               (click)="closeMobileSidebar()">
            <div class="item-icon">
              <i class="ki-duotone ki-book"><span class="path1"></span><span class="path2"></span></i>
            </div>
            <div class="item-label">
              {{ 'INSIGHTER.DASHBOARD.NAV.MY_KNOWLEDGE' | translate }}
            </div>
          </div>
          <div class="nav-item" [routerLink]="['my-downloads']" routerLinkActive="active"
               (click)="closeMobileSidebar()">
            <div class="item-icon">
              <i class="ki-duotone ki-file-down"><span class="path1"></span><span class="path2"></span></i>
            </div>
            <div class="item-label">
              {{ 'INSIGHTER.DASHBOARD.NAV.MY_DOWNLOADS' | translate }}
            </div>
          </div>
          <div class="nav-item" [routerLink]="['read-later']" routerLinkActive="active"
               (click)="closeMobileSidebar()">
            <div class="item-icon">
              <i class="ki-duotone ki-bookmark"><span class="path1"></span><span class="path2"></span></i>
            </div>
            <div class="item-label">
              {{ 'INSIGHTER.DASHBOARD.NAV.READ_LATER' | translate }}
            </div>
          </div>
          <!-- Meetings Expandable Item -->
          <div class="nav-item expandable" [class.expanded]="isMeetingsExpanded">
            <div class="nav-item-main" (click)="toggleMeetings()">
              <div class="item-icon">
                <i class="ki-duotone ki-calendar"><span class="path1"></span><span class="path2"></span></i>
              </div>
              <div class="item-label">
                {{ 'INSIGHTER.DASHBOARD.NAV.MEETINGS' | translate }}
              </div>
              <div class="expand-icon">
                <i class="ki-duotone ki-down" [class.rotated]="isMeetingsExpanded">
                  <span class="path1"></span>
                  <span class="path2"></span>
                </i>
              </div>
            </div>
            <div class="sub-nav" [class.show]="isMeetingsExpanded">
              <div class="sub-nav-item"  [routerLink]="['my-consulting-schedule']" routerLinkActive="active" *ngIf="!(isClient$ | async)"
                   (click)="closeMobileSidebar()">
                <div class="sub-item-icon">
                  <i class="ki-duotone ki-calendar"><span class="path1"></span><span class="path2"></span></i>
                </div>
                <div class="sub-item-label">
                  {{ 'INSIGHTER.DASHBOARD.NAV.MY_CONSULTING_SCHEDULE' | translate }}
                </div>
              </div>
              <div class="sub-nav-item" [routerLink]="['my-meetings/received']" routerLinkActive="active"  *ngIf="!(isClient$ | async)"
                   (click)="closeMobileSidebar()">
                <div class="sub-item-icon">
                  <i class="ki-duotone ki-message-text-2"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                </div>
                <div class="sub-item-label">
                  {{ 'INSIGHTER.MEETINGS.TABS.RECEIVED' | translate }}
                </div>
              </div>
              <div class="sub-nav-item" [routerLink]="['my-meetings/sent']" routerLinkActive="active"
                   (click)="closeMobileSidebar()">
                <div class="sub-item-icon">
                  <i class="ki-duotone ki-send"><span class="path1"></span><span class="path2"></span></i>
                </div>
                <div class="sub-item-label">
                  {{ 'INSIGHTER.MEETINGS.TABS.SENT' | translate }}
                </div>
              </div>
            </div>
          </div>
         
          <div class="nav-item" [routerLink]="['my-company-settings']" routerLinkActive="active" *ngIf="hasCompanyRole$ | async"
               (click)="closeMobileSidebar()">
            <div class="item-icon">
              <i class="ki-duotone ki-office-bag"><span class="path1"></span><span class="path2"></span></i>
            </div>
            <div class="item-label">
              {{ 'INSIGHTER.DASHBOARD.NAV.MY_COMPANY' | translate }}
            </div>
          </div>
          <div class="nav-item" [routerLink]="['account-settings']" routerLinkActive="active"  *ngIf="!(isClient$ | async)"
               (click)="closeMobileSidebar()">
            <div class="item-icon">
              <i class="ki-duotone ki-setting-2"><span class="path1"></span><span class="path2"></span></i>
            </div>
            <div class="item-label">
              {{ 'INSIGHTER.DASHBOARD.NAV.ACCOUNT_SETTINGS' | translate }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</p-sidebar>

<div class="flex-column flex-row-fluid" id="kt_app_wrapper" > 
  <div id="kt_app_toolbar" class="app-toolbar"  style="padding-top: 90px;">
    <div
      id="kt_app_toolbar_container"
      class="app-container container-xxl d-flex align-items-start"
     
    >
      <div class="d-flex flex-column flex-row-fluid">
   
        <!-- here header or statistics -->
        <app-overview-statistics *ngIf="isRouteActive('my-dashboard')"></app-overview-statistics>
        <app-requests-statistics *ngIf="isRouteActive('my-requests')"></app-requests-statistics>
        <app-knowledge-statistics *ngIf="isRouteActive('my-knowledge')"></app-knowledge-statistics>
        <app-downloads-statistics *ngIf="isRouteActive('my-downloads')"></app-downloads-statistics>
        <app-read-later-statistics *ngIf="isRouteActive('read-later')"></app-read-later-statistics>
        <app-meetings-statistics *ngIf="isRouteActive('my-meetings') && !isSubRouteActive('my-meetings', 'sent')"></app-meetings-statistics>
        <app-sent-meetings-statistics *ngIf="isSubRouteActive('my-meetings', 'sent')"></app-sent-meetings-statistics>
        <app-consulting-schedule-header *ngIf="isRouteActive('my-consulting-schedule')"></app-consulting-schedule-header>
        <app-account-settings-header *ngIf="isRouteActive('account-settings')"></app-account-settings-header>
        <app-company-statistics *ngIf="isRouteActive('my-company-settings') && (hasCompanyRole$ | async)"></app-company-statistics>
      </div>
    </div>
  </div>

  <div class="app-container w-100 ">
    <div class="app-main flex-column flex-row-fluid">
      <div class="d-flex flex-column flex-column-fluid">
        <div class="d-flex flex-column flex-sm-row">
          
          <!-- Desktop Side Navigation (hidden on mobile) -->
          <div class="side-nav-container" [class.collapsed]="isNavCollapsed" *ngIf="!isMobileView">
            <div class="navigation-cards">
              <!-- Dashboard Card -->
              <div class="p-card navigation-card">
                <div class="p-card-header">
                  <h3 *ngIf="!isNavCollapsed">{{ 'INSIGHTER.DASHBOARD.NAV.DASHBOARD' | translate }}</h3>
                  <!-- Collapse Toggle Button -->
                  <button type="button" class="nav-toggle-btn btn btn-sm btn-icon btn-active-color-primary" (click)="toggleNavCollapse()" 
                          [attr.title]="isNavCollapsed ? 'Expand Menu' : 'Collapse Menu'">
                    <i class="ki-duotone ki-burger-menu fs-2  text-info"><span class="path1"></span><span class="path2"></span><span class="path3"></span><span class="path4"></span></i>
                  </button>
                </div>
                <div class="p-card-body">
                  <div class="nav-item"  *ngIf="!(isClient$ | async)" [routerLink]="['my-dashboard']" routerLinkActive="active" 
                       [attr.title]="isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.OVERVIEW' | translate) : null"
                       pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.OVERVIEW' | translate) : '' }}"
                       tooltipPosition="right"
                       appendTo="body">
                    <div class="item-icon">
                      <i class="ki-duotone ki-abstract-28"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                    <div class="item-label" *ngIf="!isNavCollapsed">
                      {{ 'INSIGHTER.DASHBOARD.NAV.OVERVIEW' | translate }}
                    </div>
                  </div>
                  <div class="nav-item" [routerLink]="['my-requests']" routerLinkActive="active" *ngIf="!(isClient$ | async)"
                       [attr.title]="isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_REQUESTS' | translate) : null"
                       pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_REQUESTS' | translate) : '' }}"
                       tooltipPosition="right"
                       appendTo="body">
                    <div class="item-icon">
                      <i class="ki-duotone ki-document"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                    <div class="item-label" *ngIf="!isNavCollapsed">
                      {{ 'INSIGHTER.DASHBOARD.NAV.MY_REQUESTS' | translate }}
                    </div>
                  </div>
                  <div class="nav-item" [routerLink]="['my-knowledge']" routerLinkActive="active"  *ngIf="!(isClient$ | async)"
                       [attr.title]="isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_KNOWLEDGE' | translate) : null"
                       pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_KNOWLEDGE' | translate) : '' }}"
                       tooltipPosition="right"
                       appendTo="body">
                    <div class="item-icon">
                      <i class="ki-duotone ki-book"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                    <div class="item-label" *ngIf="!isNavCollapsed">
                      {{ 'INSIGHTER.DASHBOARD.NAV.MY_KNOWLEDGE' | translate }}
                    </div>
                  </div>
                  <div class="nav-item" [routerLink]="['my-downloads']" routerLinkActive="active"
                       [attr.title]="isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_DOWNLOADS' | translate) : null"
                       pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_DOWNLOADS' | translate) : '' }}"
                       tooltipPosition="right"
                       appendTo="body">
                    <div class="item-icon">
                      <i class="ki-duotone ki-file-down"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                    <div class="item-label" *ngIf="!isNavCollapsed">
                      {{ 'INSIGHTER.DASHBOARD.NAV.MY_DOWNLOADS' | translate }}
                    </div>
                  </div>
                  <div class="nav-item" [routerLink]="['read-later']" routerLinkActive="active"
                       [attr.title]="isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.READ_LATER' | translate) : null"
                       pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.READ_LATER' | translate) : '' }}"
                       tooltipPosition="right"
                       appendTo="body">
                    <div class="item-icon">
                      <i class="ki-duotone ki-bookmark"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                    <div class="item-label" *ngIf="!isNavCollapsed">
                      {{ 'INSIGHTER.DASHBOARD.NAV.READ_LATER' | translate }}
                    </div>
                  </div>
                  <div class="nav-item" [routerLink]="['my-meetings/sent']" routerLinkActive="active" *ngIf="!isNavCollapsed && (isClient$ | async)"
                       [attr.title]="isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.SENT' | translate) : null"
                       pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.SENT' | translate) : '' }}"
                       tooltipPosition="right"
                       appendTo="body">
                    <div class="item-icon">
                      <i class="ki-duotone ki-calendar"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                    <div class="item-label" >
                        {{ 'INSIGHTER.DASHBOARD.NAV.MEETINGS' | translate }}
                    </div>
                  </div>
                  <!-- Meetings Expandable Item -->
                  <div class="nav-item expandable" [class.expanded]="isMeetingsExpanded" *ngIf="!isNavCollapsed && !(isClient$ | async)">
                    <div class="nav-item-main" (click)="toggleMeetings()">
                      <div class="item-icon">
                        <i class="ki-duotone ki-calendar"><span class="path1"></span><span class="path2"></span></i>
                      </div>
                      <div class="item-label">
                        {{ 'INSIGHTER.DASHBOARD.NAV.MEETINGS' | translate }}
                      </div>
                      <div class="expand-icon">
                        <i class="ki-duotone ki-down" [class.rotated]="isMeetingsExpanded">
                          <span class="path1"></span>
                          <span class="path2"></span>
                        </i>
                      </div>
                    </div>
                    <div class="sub-nav" [class.show]="isMeetingsExpanded">
                      <div class="sub-nav-item"  [routerLink]="['my-consulting-schedule']" routerLinkActive="active" *ngIf="!(isClient$ | async)"
                      pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_CONSULTING_SCHEDULE' | translate) : '' }}"
                      tooltipPosition="right"
                      appendTo="body">
                        <div class="sub-item-icon">
                          <i class="ki-duotone ki-calendar"><span class="path1"></span><span class="path2"></span></i>
                        </div>
                        <div class="sub-item-label">
                          {{ 'INSIGHTER.DASHBOARD.NAV.MY_CONSULTING_SCHEDULE' | translate }}
                        </div>
                      </div>
                      <div class="sub-nav-item" [routerLink]="['my-meetings/received']" routerLinkActive="active"  *ngIf="!(isClient$ | async)"
                      pTooltip="{{ isNavCollapsed ? ('INSIGHTER.MEETINGS.TABS.RECEIVED' | translate) : '' }}"
                      tooltipPosition="right"
                      appendTo="body">
                        <div class="sub-item-icon">
                          <i class="ki-duotone ki-message-text-2"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                        </div>
                        <div class="sub-item-label">
                          {{ 'INSIGHTER.MEETINGS.TABS.RECEIVED' | translate }}
                        </div>
                      </div>
                      <div class="sub-nav-item" [routerLink]="['my-meetings/sent']" routerLinkActive="active"
                      pTooltip="{{ isNavCollapsed ? ('INSIGHTER.MEETINGS.TABS.SENT' | translate) : '' }}"
                      tooltipPosition="right"
                      appendTo="body">
                        <div class="sub-item-icon">
                          <i class="ki-duotone ki-send"><span class="path1"></span><span class="path2"></span></i>
                        </div>
                        <div class="sub-item-label">
                          {{ 'INSIGHTER.MEETINGS.TABS.SENT' | translate }}
                        </div>
                      </div>
                     
                    </div>
                  </div>
                  
                  <!-- Collapsed Meeting Items (shown as separate items when collapsed) -->
                  <div *ngIf="isNavCollapsed">
                    <div class="nav-item" [routerLink]="['my-consulting-schedule']" routerLinkActive="active" 
                         *ngIf="!(isClient$ | async)" [attr.title]="('INSIGHTER.DASHBOARD.NAV.MY_CONSULTING_SCHEDULE' | translate)"
                         pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_CONSULTING_SCHEDULE' | translate) : '' }}"
                         tooltipPosition="right"
                         appendTo="body">
                      <div class="item-icon">
                        <i class="ki-duotone ki-calendar"><span class="path1"></span><span class="path2"></span></i>
                      </div>
                    </div>
                    <div class="nav-item" [routerLink]="['my-meetings/received']" routerLinkActive="active" 
                         *ngIf="!(isClient$ | async)" [attr.title]="('INSIGHTER.MEETINGS.TABS.RECEIVED' | translate)"
                         pTooltip="{{ isNavCollapsed ? ('INSIGHTER.MEETINGS.TABS.RECEIVED' | translate) : '' }}"
                         tooltipPosition="right"
                         appendTo="body">
                      <div class="item-icon">
                        <i class="ki-duotone ki-message-text-2"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                      </div>
                    </div>
                    <div class="nav-item" [routerLink]="['my-meetings/sent']" routerLinkActive="active"
                         [attr.title]="('INSIGHTER.MEETINGS.TABS.SENT' | translate)"
                         pTooltip="{{ isNavCollapsed ? ('INSIGHTER.MEETINGS.TABS.SENT' | translate) : '' }}"
                         tooltipPosition="right"
                         appendTo="body">
                      <div class="item-icon">
                        <i class="ki-duotone ki-send"><span class="path1"></span><span class="path2"></span></i>
                      </div>
                    </div>
                  </div>
                 
                  <div class="nav-item" [routerLink]="['my-company-settings']" routerLinkActive="active" *ngIf="hasCompanyRole$ | async"
                       [attr.title]="isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_COMPANY' | translate) : null"
                       pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.MY_COMPANY' | translate) : '' }}"
                       tooltipPosition="right"
                       appendTo="body">
                    <div class="item-icon">
                      <i class="ki-duotone ki-office-bag"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                    <div class="item-label" *ngIf="!isNavCollapsed">
                      {{ 'INSIGHTER.DASHBOARD.NAV.MY_COMPANY' | translate }}
                    </div>
                  </div>
                  <div class="nav-item" [routerLink]="['account-settings']" routerLinkActive="active"  *ngIf="!(isClient$ | async)"
                       [attr.title]="isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.ACCOUNT_SETTINGS' | translate) : null"
                       pTooltip="{{ isNavCollapsed ? ('INSIGHTER.DASHBOARD.NAV.ACCOUNT_SETTINGS' | translate) : '' }}"
                       tooltipPosition="right"
                       appendTo="body">
                    <div class="item-icon">
                      <i class="ki-duotone ki-setting-2"><span class="path1"></span><span class="path2"></span></i>
                    </div>
                    <div class="item-label" *ngIf="!isNavCollapsed">
                      {{ 'INSIGHTER.DASHBOARD.NAV.ACCOUNT_SETTINGS' | translate }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Mobile Menu Toggle Button (visible only on mobile) -->
          <div class="mobile-menu-toggle" *ngIf="isMobileView">
            <button type="button" class="btn btn-icon btn-active-color-primary" (click)="toggleNavCollapse()">
              <i class="ki-duotone ki-burger-menu fs-2 text-info">
                <span class="path1"></span>
                <span class="path2"></span>
                <span class="path3"></span>
                <span class="path4"></span>
              </i>
            </button>
          </div>

          <!-- Main Content Area -->
          <div class="main-content-area flex-fill" [ngClass]="{'pe-5': !isRouteActive('my-company-settings'), 'pe-2': isRouteActive('my-company-settings')}">
                <router-outlet></router-outlet>
          </div>
          
        </div>
      </div>
    </div>
  </div>

  <app-footer></app-footer>
</div>
