<p-toast></p-toast>

<div class="bg-custom"></div>
<div class="content-wrapper">
  <div class="breadcrumb-bg" *ngIf="knowledge">
    <div class="container">
      <!-- Breadcrumb -->
      <div class="d-flex align-items-center justify-content-between pt-10 mb-70">
        <ul
          class="breadcrumb breadcrumb-separatorless d-flex align-items-center gap-2"
        >
          <li
            class="breadcrumb-item text-gray-800 lh-1 d-flex align-items-center"
          >
            <a
              [routerLink]="['/']"
              class="text-gray-700 text-hover-info d-flex align-items-center gap-2"
            >
              <i class="ki-outline ki-home text-gray-700 fs-3"></i>
              {{ 'VIEW_MY_KNOWLEDGE.BREADCRUMB.HOME' | translate }}
            </a>
            <i
              class="ki-outline {{
                lang === 'ar' ? 'ki-left' : 'ki-right'
              }} fs-4 text-gray-700 ms-2"
            ></i>
          </li>
          <li
            class="breadcrumb-item text-gray-800 lh-1 d-flex align-items-center"
          >
            <a
              [routerLink]="['/app/insighter-dashboard/my-knowledge/general']"
              class="text-gray-700 text-hover-info"
            >
              {{ 'VIEW_MY_KNOWLEDGE.BREADCRUMB.MY_KNOWLEDGE_BASE' | translate }}
            </a>
            <i
              class="ki-outline {{
                lang === 'ar' ? 'ki-left' : 'ki-right'
              }} fs-4 text-gray-700 ms-2"
            ></i>
          </li>
          <li
            class="breadcrumb-item text-gray-800 lh-1 d-flex align-items-center"
          >
            <a
              [routerLink]="['/app/insighter-dashboard/my-knowledge/general']"
              class="text-gray-700 text-hover-info"
            >
              {{ 'VIEW_MY_KNOWLEDGE.BREADCRUMB.GENERAL' | translate }}
            </a>
            <i
              class="ki-outline {{
                lang === 'ar' ? 'ki-left' : 'ki-right'
              }} fs-4 text-gray-700 ms-2"
            ></i>
          </li>
        </ul>
          <div
            class="breadcrumb-item text-gray-800 lh-1 d-flex align-items-center gap-2"
          >
          <!-- Only show delete button if not in review -->
          <button class="btn btn-xs btn-danger d-flex align-items-center" (click)="confirmDelete()" *ngIf="knowledge.status !== 'in_review'">
            <i class="ki-duotone ki-trash fs-6 me-1">
              <span class="path1"></span>
              <span class="path2"></span>
              <span class="path3"></span>
              <span class="path4"></span>
              <span class="path5"></span>
            </i>
            Delete
          </button>
            <!-- Only show edit button if not in review -->
            <button class="btn btn-xs btn-success d-flex align-items-center" 
            [routerLink]="['/app/edit-knowledge/stepper', knowledge.id]"
            *ngIf="knowledge.status !== 'in_review' && 
              !(
              (knowledge.status === 'unpublished' || knowledge.status === 'scheduled') && 
              knowledge.publish_as !== 'package' && 
              !hasRequiredFields()
            )"
            >
              <i class="ki-duotone ki-pencil fs-6 me-1">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>
              {{ 'VIEW_MY_KNOWLEDGE.EDIT' | translate }}
            </button>
          
          </div>
      </div>

      <!-- Title -->
      <div class="page-title d-flex align-items-start me-3 mb-4 mb-lg-15">
        <div
          class="btn btn-icon btn-custom bg-white h-70px w-70px me-6"
          *ngIf="knowledge.type === 'report'"
        >
          <svg
            width="35"
            height="32"
            viewBox="0 0 35 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              opacity="0.4"
              d="M31.5876 15.225L30.1584 21.3208C28.9334 26.5854 26.5126 28.7146 21.9626 28.2771C21.2334 28.2187 20.4459 28.0875 19.6001 27.8833L17.1501 27.3C11.0688 25.8562 9.1876 22.8521 10.6168 16.7562L12.0459 10.6458C12.3376 9.40624 12.6876 8.32707 13.1251 7.43749C14.8313 3.90832 17.7334 2.96041 22.6043 4.11249L25.0397 4.68124C31.1501 6.11041 33.0168 9.12916 31.5876 15.225Z"
              fill="#699DDE"
            />
            <path
              d="M21.9623 28.2771C21.0581 28.8896 19.9206 29.4 18.5352 29.8521L16.231 30.6104C10.4414 32.4771 7.39352 30.9167 5.51227 25.1271L3.6456 19.3667C1.77893 13.5771 3.32476 10.5146 9.11435 8.64792L11.4185 7.88958C12.0164 7.7 12.5852 7.53958 13.1248 7.4375C12.6873 8.32708 12.3373 9.40625 12.0456 10.6458L10.6164 16.7563C9.18727 22.8521 11.0685 25.8562 17.1498 27.3L19.5998 27.8833C20.4456 28.0875 21.2331 28.2187 21.9623 28.2771Z"
              fill="#0778B9"
            />
            <path
              d="M25.5065 15.3271C25.419 15.3271 25.3315 15.3125 25.2294 15.298L18.1565 13.5042C17.5732 13.3584 17.2232 12.7605 17.369 12.1771C17.5148 11.5938 18.1127 11.2438 18.6961 11.3896L25.769 13.1834C26.3523 13.3292 26.7023 13.9271 26.5565 14.5105C26.4398 14.9917 25.9877 15.3271 25.5065 15.3271Z"
              fill="white"
            />
            <path
              d="M21.2335 20.2562C21.146 20.2562 21.0585 20.2416 20.9564 20.2271L16.7126 19.1479C16.1293 19.0021 15.7793 18.4041 15.9251 17.8208C16.071 17.2375 16.6689 16.8875 17.2522 17.0333L21.496 18.1125C22.0793 18.2583 22.4293 18.8562 22.2835 19.4396C22.1668 19.9354 21.7293 20.2562 21.2335 20.2562Z"
              fill="white"
            />
          </svg>
        </div>
        <div
          class="btn btn-icon btn-custom bg-white h-70px w-70px me-6"
          *ngIf="knowledge.type === 'insight'"
        >
          <app-keenicon
            name="chart-line"
            class="fs-3x mx-5 text-success"
          ></app-keenicon>
        </div>
        <div
          class="btn btn-icon btn-custom bg-white h-70px w-70px me-6"
          *ngIf="knowledge.type === 'data'"
        >
          <app-keenicon
            name="data"
            class="fs-3x mx-5 text-primary"
            *ngIf="knowledge.type === 'data'"
          ></app-keenicon>
        </div>
        <div
          class="btn btn-icon btn-custom bg-white h-70px w-70px me-6"
          *ngIf="knowledge.type === 'manual'"
        >
          <app-keenicon
            name="book"
            class="fs-3x mx-5 text-warning"
          ></app-keenicon>
        </div>
        <div
          class="btn btn-icon btn-custom bg-white h-70px w-70px me-6"
          *ngIf="knowledge.type === 'course'"
        >
          <app-keenicon
            name="teacher"
            class="fs-3x mx-5 text-success"
          ></app-keenicon>
        </div>
        <div
          class="btn btn-icon btn-custom bg-white h-70px w-70px me-6"
          *ngIf="knowledge.type === 'media'"
        >
          <app-keenicon
            name="video"
            class="fs-3x mx-5 text-danger"
          ></app-keenicon>
        </div>

        <h1
          class="page-heading d-flex text-black fw-bolder fs-lg-rem flex-column justify-content-center my-0 max-w-800px"
        >
          <div class="d-flex align-items-start flex-column gap-2 lg-max-width-700px">
            <span>
              {{ knowledge.title || 'N/A' }}
            </span>
          </div>
          <span class="page-desc fs-6 fw-bold d-flex align-items-center pt-4">
            <span class="custom-text me-3 lh-1 d-flex align-items-center text-capitalize">
              {{ knowledge.type || 'N/A' }}
            </span>
            <span class="bullet text-black h-6px w-6px mx-3"></span>
            <span class="d-flex align-items-center text-gray-700">
              <i class="ki-duotone ki-tag text-warning fs-3 mx-4">
                <span class="path1"></span>
                <span class="path2"></span>
                <span class="path3"></span>
              </i>
            0 Downloads
            </span>
          </span>
        </h1>
      </div>

      <!-- Tabs -->
      <div class="">
        <div class="pt-9 pb-0">
          <div class="d-flex overflow-auto h-55px">
            <ul
              class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bold flex-nowrap"
            >
              <li class="nav-item">
                <a
                  class="nav-link text-active-info me-6"
                  routerLink="details"
                  routerLinkActive="active"
                >
                  {{ 'VIEW_MY_KNOWLEDGE.KNOWLEDGE_DETAILS' | translate }}
                </a>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link text-active-info me-6"
                  routerLink="analytics"
                  routerLinkActive="active"
                >
                  {{ 'VIEW_MY_KNOWLEDGE.ANALYTICS' | translate }}
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container" *ngIf="knowledge">
    <div class="row py-10">
      <div class="col-lg-8 p-n-10">
        <router-outlet></router-outlet>
      </div>
      <div class="col-lg-4">
        <!-- Sticky container for sidebar elements -->
        <div class="position-lg-sticky" style="z-index: 1; top: 120px;">
          <!-- Main knowledge details -->
          <div class="tp-course-details2-widget">
            <div class="tp-course-details2-widget-content">
              <div
                class="tp-course-details2-widget-price d-flex justify-content-center align-items-center"
              >
              <span class="fs-2x  fw-bolder" [ngClass]="(knowledge.total_price | currency) === '$0.00' ? 'text-success' : 'text-primary'">
                <ng-container *ngIf="(knowledge.total_price | currency) === '$0.00'">
                  <ng-container *ngIf="lang === 'ar'">صدقة جارية</ng-container>
                  <ng-container *ngIf="lang !== 'ar'">Free</ng-container>
                </ng-container>
                <ng-container *ngIf="(knowledge.total_price | currency) !== '$0.00'">
                  {{ knowledge.total_price ? (knowledge.total_price | currency) : 'N/A' }}
                </ng-container>
              </span>
            </div>
            <div class="separator separator-dashed my-5"></div>

            <!-- Report details section -->
            <div class="tp-course-details2-widget-list p-4">
              <div class="tp-course-details2-widget-list-item-wrapper">
                <!-- status -->
                <div
                  class="tp-course-details2-widget-list-item d-flex align-items-center justify-content-between mb-3"
                >
                  <span>
                    <i class="ki-outline ki-message-text-2 fs-4 mx-4"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.STATUS' | translate }}
                  </span>
                  <span
                    class="text-capitalize"
                    [ngClass]="{
                      'text-success': knowledge.status === 'published',
                      'text-warning': knowledge.status === 'scheduled',
                      'text-info': knowledge.status === 'in_review',
                      'text-danger': knowledge.status === 'unpublised'
                    }"
                  >
                    {{ knowledge.status === 'in_review' ? 'In Review' : (knowledge.publish_as === 'package' ? 'Published in Package only' : (knowledge.status || 'N/A')) }}
                  </span>
                </div>

                <!-- Add Publish Date for Scheduled Status -->
                <div
                  *ngIf="knowledge.status === 'scheduled'"
                  class="tp-course-details2-widget-list-item d-flex align-items-center justify-content-between mb-3"
                >
                  <span>
                    <i class="ki-outline ki-calendar fs-4 mx-4"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.PUBLISH_DATE' | translate }}
                  </span>
                  <span>{{ knowledge.published_at ? (knowledge.published_at | date : "dd MMMM yyyy") : 'N/A' }}</span>
                </div>

                <!-- Included in Package -->
                <div
                  *ngIf="knowledge.publish_as === 'both'"
                  class="tp-course-details2-widget-list-item d-flex align-items-center justify-content-between mb-3"
                >
                  <span>
                    <i class="ki-outline ki-package fs-4 mx-4"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.INCLUDED_IN_PACKAGE' | translate }}
                  </span>
                  <span>Yes</span>
                </div>

                <!-- Language -->
                <div
                  class="tp-course-details2-widget-list-item d-flex align-items-center justify-content-between mb-3"
                >
                  <span>
                    <i class="ki-outline ki-message-text-2 fs-4 mx-4"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.DOCUMENTS_LANGUAGE' | translate }}
                  </span>
                  <span class="text-capitalize">{{ knowledge.language || 'N/A' }}</span>
                </div>

                <!-- Industry -->
                <div
                  *ngIf="knowledge && knowledge.industry"
                  class="tp-course-details2-widget-list-item d-flex align-items-center justify-content-between mb-3"
                >
                  <span>
                    <i class="ki-outline ki-file fs-4 mx-4"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.INDUSTRY' | translate }}
                  </span>
                  <span
                    class="badge badge-light-secondary text-primary fs-8 fw-bold pre-line text-right"
                  >
                    {{ knowledge.industry?.name || 'N/A' }}
                  </span>
                </div>

                <!-- ISIC Code -->
                <div
                  *ngIf="knowledge && knowledge.isic_code"
                  class="tp-course-details2-widget-list-item d-flex align-items-center justify-content-between mb-3"
                >
                  <span>
                    <i class="ki-outline ki-file fs-4 mx-4"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.ISIC_CODE' | translate }}
                  </span>
                  <span
                    class="badge badge-light-secondary text-primary fs-8 fw-bold"
                    [ngbTooltip]="knowledge.isic_code?.name || 'N/A'"
                  >
                    {{ knowledge.isic_code?.key || 'N/A' }}
                  </span>
                </div>

                <!-- Published -->
                <div
                  class="tp-course-details2-widget-list-item d-flex align-items-center justify-content-between mb-3"
                  *ngIf="knowledge.published_at && knowledge.status !== 'scheduled'"
                >
                  <span>
                    <i class="ki-outline ki-check-circle fs-4 mx-4"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.PUBLISHED_AT' | translate }}
                  </span>
                  <span>{{ knowledge.published_at ? (knowledge.published_at | date : "dd MMMM yyyy") : 'N/A' }}</span>
                </div>

                <!-- Target Market -->
                <div
                  class="tp-course-details2-widget-list-item d-flex align-items-center justify-content-between mb-3"
                >
                  <span>
                    <i class="ki-outline ki-icon fs-4 mx-4"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.TARGET_MARKET' | translate }}
                  </span>
                  <div
                    class="max-w-100px d-flex flex-wrap gap-2 justify-content-end"
                  >
                    <!-- Show "Worldwide" if all 6 regions are selected -->
                    <ng-container *ngIf="knowledge.regions && knowledge.regions.length === 6">
                      <span class="badge badge-light-secondary text-gray-800 fs-8 fw-bold">
                        Worldwide
                      </span>
                    </ng-container>
                    
                    <!-- Show individual regions only if not all 6 regions are selected -->
                    <ng-container *ngIf="knowledge.economic_blocs && knowledge.economic_blocs.length > 0 && !(knowledge.regions && knowledge.regions.length === 6)">
                      <span
                        class="badge badge-light-secondary text-gray-800 fs-8 fw-bold"
                        *ngFor="let bloc of knowledge.economic_blocs"
                      >
                        {{ bloc.name || 'N/A' }}
                      </span>
                    </ng-container>
                    <ng-container *ngIf="knowledge.regions && knowledge.regions.length > 0 && knowledge.regions.length < 6">
                      <span
                        class="badge badge-light-secondary text-gray-800 fs-8 fw-bold"
                        *ngFor="let region of knowledge.regions"
                      >
                        {{ region.name || 'N/A' }}
                      </span>
                    </ng-container>
                    <ng-container *ngIf="knowledge.countries && knowledge.countries.length > 0 && !(knowledge.regions && knowledge.regions.length === 6)">
                      <span
                        class="badge badge-light-secondary text-gray-800 fs-8 fw-bold"
                        *ngFor="let country of knowledge.countries"
                      >
                        {{ country.name || 'N/A' }}
                      </span>
                    </ng-container>
                    <span *ngIf="(!knowledge.economic_blocs || knowledge.economic_blocs.length === 0) && 
                                (!knowledge.regions || knowledge.regions.length === 0) && 
                                (!knowledge.countries || knowledge.countries.length === 0)"
                          class="badge badge-light-secondary text-gray-800 fs-8 fw-bold">
                      N/A
                    </span>
                  </div>
                </div>

                <div class="d-flex flex-column gap-3 mb-4">
                  <!-- Edit button - only show when we don't need to show Continue button -->
              
                  <!-- Show pending review status -->
                  <button
                    class="btn btn-secondary w-100 disabled opacity-75"
                    *ngIf="knowledge.status === 'in_review'"
                    disabled
                  >
                    <i class="ki-outline ki-time fs-4 me-2"></i>
                    {{ 'PENDING_Manager_REVIEW' | translate }}
                  </button>

                  <!-- Show send to review button for company-insighter when need_to_review is true -->
                  <button
                    class="btn btn-primary w-100"
                    (click)="sendToReview()"
                    *ngIf="knowledge.status !== 'in_review' && 
                          (knowledge.status === 'unpublished' || knowledge.status === 'scheduled') && 
                          knowledge.publish_as !== 'package' && 
                          hasRequiredFields() && 
                          isCompanyInsighter() && 
                          needsReview()"
                  >
                    <i class="ki-outline ki-check-square fs-4 me-2"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.SEND_TO_REVIEW' | translate }}
                  </button>

                  <!-- Show publish button when not needing review or user is not company-insighter -->
                  <button
                    class="btn btn-primary w-100"
                    (click)="confirmPublish()"
                    *ngIf="knowledge.status !== 'in_review' && 
                          (knowledge.status === 'unpublished' || knowledge.status === 'scheduled') && 
                          knowledge.publish_as !== 'package' && 
                          hasRequiredFields() && 
                          (!isCompanyInsighter() || !needsReview())"
                  >
                    <i class="ki-outline ki-cart fs-4 me-2"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.PUBLISH' | translate }}
                  </button>

                  <!-- Show continue button if required fields are missing and not in review -->
                  <button
                    class="btn btn-primary w-100"
                    (click)="navigateToEdit()"
                    *ngIf="knowledge.status !== 'in_review' && (knowledge.status === 'unpublished' || knowledge.status === 'scheduled') && knowledge.publish_as !== 'package' && !hasRequiredFields()"
                  >
                    <i class="ki-outline ki-arrow-right fs-4 me-2"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.CONTINUE' | translate }}
                  </button>

                  <!-- Package publishing options - don't show if in review -->
                  <button
                    class="btn btn-info w-100"
                    (click)="publishAs('package')"
                    *ngIf="knowledge.status !== 'in_review' && knowledge.publish_as === 'both'"
                  >
                    <i class="ki-duotone ki-package fs-4 me-2">
                      <span class="path1"></span>
                      <span class="path2"></span>
                    </i>
                    {{ 'VIEW_MY_KNOWLEDGE.PUBLISH_IN_PACKAGE' | translate }}
                  </button>

                  <button
                    class="btn btn-info w-100"
                    (click)="publishAs('both')"
                    *ngIf="knowledge.status !== 'in_review' && knowledge.publish_as === 'package' && (knowledge.status === 'published')"
                  >
                    <i class="ki-duotone ki-package fs-4 me-2">
                      <span class="path1"></span>
                      <span class="path2"></span>
                    </i>
                    {{ 'VIEW_MY_KNOWLEDGE.MAKE_AVAILABLE' | translate }}
                  </button>

                  <!-- Show change schedule button only when not needing review or user is not company-insighter -->
                  <button
                    class="btn btn-light-warning w-100"
                    (click)="openScheduleDialog()"
                    *ngIf="knowledge.status !== 'in_review' && 
                          (knowledge.status === 'unpublished' || knowledge.status === 'scheduled') && 
                          hasRequiredFields() && 
                          (!isCompanyInsighter() || !needsReview())"
                  >
                    {{ 'VIEW_MY_KNOWLEDGE.CHANGE_SCHEDULE' | translate }}
                  </button>
                </div>

                <!-- Included in Packages Section -->
                <div class="tp-course-details2-widget-list-item mb-5" *ngIf="knowledge.package && knowledge.package.length > 0">
                  <h4 class="fs-6 fw-bold mb-3">{{ 'INCLUDED_IN_PACKAGES' | translate }}</h4>
                  <div class="d-flex flex-column gap-2">
                    <a *ngFor="let pkg of knowledge.package" 
                       [routerLink]="['/app/my-knowledge-base/view-my-packages', pkg.id]"
                       class="d-flex align-items-center p-3 bg-light-info rounded">
                      <i class="ki-duotone ki-package fs-3 me-3 text-info">
                        <span class="path1"></span>
                        <span class="path2"></span>
                      </i>
                      <span class="text-hover-primary">{{ pkg.name }}</span>
                    </a>
                  </div>
                </div>

                <div
                  class="d-flex flex-column gap-3 mb-4"
                  *ngIf="knowledge.status === 'published'"
                >
                  <button
                    class="btn btn-light-danger w-100"
                    (click)="confirmUnpublish()"
                  >
                    <i class="ki-outline ki-cart fs-4 me-2"></i>
                    {{ 'VIEW_MY_KNOWLEDGE.UNPUBLISH' | translate }}
                  </button>
                </div>
              </div>
            </div>
            </div>
          </div>
          
          <!-- Share Box (Only visible for published items) -->
          <div *ngIf="knowledge.status === 'published'"
               class="tp-course-details2-widget-2 mt-5">
            <div class="p-4">
              <!-- New Social Share Animation Container -->
              <div class="btn-share">
                <span class="btn-text">{{ 'SHARE' | translate }}</span>
                <span class="btn-icon">
                  <svg
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                  >
                    <path
                      d="M767.99994 585.142857q75.995429 0 129.462857 53.394286t53.394286 129.462857-53.394286 129.462857-129.462857 53.394286-129.462857-53.394286-53.394286-129.462857q0-6.875429 1.170286-19.456l-205.677714-102.838857q-52.589714 49.152-124.562286 49.152-75.995429 0-129.462857-53.394286t-53.394286-129.462857 53.394286-129.462857 129.462857-53.394286q71.972571 0 124.562286 49.152l205.677714-102.838857q-1.170286-12.580571-1.170286-19.456 0-75.995429 53.394286-129.462857t129.462857-53.394286 129.462857 53.394286 53.394286 129.462857-53.394286 129.462857-129.462857 53.394286q-71.972571 0-124.562286-49.152l-205.677714 102.838857q1.170286 12.580571 1.170286 19.456t-1.170286 19.456l205.677714 102.838857q52.589714-49.152 124.562286-49.152z"
                      fill="#ffffff"
                    ></path>
                  </svg>
                </span>
                <ul class="social-icons">
                  <!-- Facebook -->
                  <li>
                    <a [href]="getSocialShareLink('facebook')" target="_blank">
                      <i class="fab fa-facebook-f"></i>
                    </a>
                  </li>
                  <!-- Twitter/X -->
                  <li>
                    <a [href]="getSocialShareLink('twitter')" target="_blank">
                    
                      <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.98 20" width="18" height="18">
                        <defs>
                          <style>
                            .cls-1 {
                              fill: #fff;
                            }
                          </style>
                        </defs>
                        <path class="cls-1" d="M11.89,8.47L19.34,0h-1.76l-6.46,7.35L5.95,0H0l7.8,11.12L0,20h1.76l6.82-7.77,5.45,7.77h5.95M2.4,1.3h2.71l12.46,17.46h-2.71"/>
                      </svg>
                    </a>
                  </li>
                  <!-- LinkedIn -->
                  <li>
                    <a [href]="getSocialShareLink('linkedin')" target="_blank">
                      <i class="fab fa-linkedin-in" style="font-size: 20px"></i>
                    </a>
                  </li>
                  <!-- WhatsApp -->
                  <li>
                    <a [href]="getSocialShareLink('whatsapp')" target="_blank">
                      <i class="fab fa-whatsapp"></i>
                    </a>
                  </li>
                </ul>
              </div>
              
              <!-- Copy Link Button -->
              <button class="btn btn-light-info w-100" (click)="copyToClipboard(getShareableLink())">
                <i class="ki-outline ki-copy fs-4 me-2"></i>
                {{ 'COPY_LINK' | translate }}
              </button>
              
              <!-- Link Copied Confirmation -->
              <div *ngIf="linkCopied" class="text-success text-center mt-2 small">
                <i class="ki-outline ki-check fs-6 me-1"></i> {{ 'LINK_COPIED' | translate }}
              </div>
            </div>
            
          </div>
      </div>
      </div>
    </div>

    <div class="separator separator-solid my-10"></div>
    <div class="row py-10">
      <!-- <app-related-knowledges></app-related-knowledges> -->
    </div>
  </div>
</div>

<!-- Share Knowledge Dialog -->
<!-- Share dialog removed as requested -->
